diff -up php-5.2.17/main/rfc1867.c.orig php-5.2.17/main/rfc1867.c
--- php-5.2.17/main/rfc1867.c.orig	2011-08-19 08:33:09.000000000 +0700
+++ php-5.2.17/main/rfc1867.c	2011-08-19 08:34:29.000000000 +0700
@@ -1215,7 +1215,7 @@ filedone:
 #endif
 
 			if (!is_anonymous) {
-				if (s && s > filename) {
+				if (s && s >= filename) {
 					safe_php_register_variable(lbuf, s+1, strlen(s+1), NULL, 0 TSRMLS_CC);
 				} else {
 					safe_php_register_variable(lbuf, filename, strlen(filename), NULL, 0 TSRMLS_CC);
@@ -1228,7 +1228,7 @@ filedone:
 			} else {
 				snprintf(lbuf, llen, "%s[name]", param);
 			}
-			if (s && s > filename) {
+			if (s && s >= filename) {
 				register_http_post_files_variable(lbuf, s+1, http_post_files, 0 TSRMLS_CC);
 			} else {
 				register_http_post_files_variable(lbuf, filename, http_post_files, 0 TSRMLS_CC);
