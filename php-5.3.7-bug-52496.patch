--- PHP_5_3/sapi/cli/php_cli.c	2011/05/30 15:55:32	311599
+++ PHP_5_3/sapi/cli/php_cli.c	2011/05/30 15:57:50	311600
@@ -799,7 +799,7 @@
 				request_started = 1;
 				php_cli_usage(argv[0]);
 				php_end_ob_buffers(1 TSRMLS_CC);
-				exit_status=0;
+				exit_status = (c == '?' && argc > 1 && !strchr(argv[1],  c));
 				goto out;
 
 			case 'i': /* php info & quit */
