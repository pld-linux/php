--- PHP_5_3/ext/mysqli/mysqli_warning.c	2011/03/17 10:13:20	309338
+++ PHP_5_3/ext/mysqli/mysqli_warning.c	2011/03/17 10:28:53	309339
@@ -197,7 +197,7 @@
 
 		MYSQLI_FETCH_RESOURCE(w, MYSQLI_WARNING *, &mysqli_warning, "mysqli_warning", MYSQLI_STATUS_VALID);
 
-		if (w->next) {
+		if (w && w->next) {
 			w = w->next;
 	        ((MYSQLI_RESOURCE *)(obj->ptr))->ptr = w;
 			RETURN_TRUE;
