diff -burN php-5.0.4RC1.orig/acinclude.m4 php-5.0.4RC1/acinclude.m4
--- php-5.0.4RC1.orig/acinclude.m4	2005-03-15 18:02:27.869258184 +0100
+++ php-5.0.4RC1/acinclude.m4	2005-03-15 18:04:34.037077760 +0100
@@ -779,13 +779,13 @@
 dnl
 AC_DEFUN([PHP_BUILD_PROGRAM],[
   OVERALL_TARGET=[]ifelse($1,,php,$1)
-  php_c_pre='$(CC)'
+  php_c_pre='$(LIBTOOL) --mode=compile $(CC)'
   php_c_meta='$(COMMON_FLAGS) $(CFLAGS_CLEAN) $(EXTRA_CFLAGS)'
-  php_c_post=' && echo > $[@]'
-  php_cxx_pre='$(CXX)'
+  php_c_post=''
+  php_cxx_pre='$(LIBTOOL) --mode=compile $(CXX)'
   php_cxx_meta='$(COMMON_FLAGS) $(CXXFLAGS_CLEAN) $(EXTRA_CXXFLAGS)'
-  php_cxx_post=' && echo > $[@]'
-  php_lo=o
+  php_cxx_post=''
+  php_lo=lo
 
   case $with_pic in
     yes) pic_setting='-prefer-pic';;
