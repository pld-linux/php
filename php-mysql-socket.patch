--- php-4.0RC1/ext/mysql/config.m4.wiget	Sun Mar 26 21:51:10 2000
+++ php-4.0RC1/ext/mysql/config.m4	Fri Mar 31 12:23:06 2000
@@ -4,17 +4,25 @@
 sinclude(ext/mysql/libmysql/mysql.m4)
 
 AC_DEFUN(PHP_MYSQL_SOCK,[
-  AC_MSG_CHECKING(for MySQL UNIX socket)
-  MYSQL_SOCK=/tmp/mysql.sock
-  for i in  \
-      /var/run/mysqld/mysqld.sock \
-      /var/tmp/mysql.sock \
-      /var/lib/mysql/mysql.sock \
-      ; do
-    if test -r $i; then
-      MYSQL_SOCK=$i
-    fi
-  done
+  AC_ARG_WITH(mysql_sock,
+[  --with-mysql-socket=PATH	
+                              Specify location of MySQL UNIX socket,
+			      defaults search in know locations],[
+	MYSQL_SOCK=$withval
+	],)
+  if test "$MYSQL_SOCK" = "" -o "$MYSQL_SOCK" = "no" -o "MYSQL_SOCK" = "yes"; then
+    AC_MSG_CHECKING(for MySQL UNIX socket)
+    MYSQL_SOCK=/tmp/mysql.sock
+    for i in  \
+        /var/run/mysqld/mysqld.sock \
+        /var/tmp/mysql.sock \
+        /var/lib/mysql/mysql.sock \
+        ; do
+      if test -r $i; then
+        MYSQL_SOCK=$i
+      fi
+    done
+  fi
   AC_DEFINE_UNQUOTED(MYSQL_UNIX_ADDR, "$MYSQL_SOCK", [ ])
   AC_MSG_RESULT($MYSQL_SOCK)
 ])
