--- php-4.1.1/ext/mysql/config.m4.orig	Sat Nov  3 22:26:27 2001
+++ php-4.1.1/ext/mysql/config.m4	Sat Jan 19 10:20:23 2002
@@ -16,19 +16,25 @@
 ])
 	
 AC_DEFUN(PHP_MYSQL_SOCK,[
-  AC_MSG_CHECKING(for MySQL UNIX socket)
-  MYSQL_SOCK=/tmp/mysql.sock
-  for i in  \
-      /var/run/mysqld/mysqld.sock \
-      /var/tmp/mysql.sock \
-      /var/lib/mysql/mysql.sock \
-      /var/mysql/mysql.sock \
-      /Private/tmp/mysql.sock \
-      ; do
-    if test -r $i; then
-      MYSQL_SOCK=$i
+    AC_ARG_WITH(mysql_sock,
+  [  --with-mysql-socket=PATH	
+                                Specify location of MySQL UNIX socket,
+  			      defaults search in know locations],[
+  	MYSQL_SOCK=$withval
+  	],)
+    if test "$MYSQL_SOCK" = "" -o "$MYSQL_SOCK" = "no" -o "MYSQL_SOCK" = "yes"; then
+      AC_MSG_CHECKING(for MySQL UNIX socket)
+      MYSQL_SOCK=/tmp/mysql.sock
+      for i in  \
+          /var/run/mysqld/mysqld.sock \
+          /var/tmp/mysql.sock \
+          /var/lib/mysql/mysql.sock \
+          ; do
+        if test -r $i; then
+          MYSQL_SOCK=$i
+        fi
+      done
     fi
-  done
   AC_DEFINE_UNQUOTED(MYSQL_UNIX_ADDR, "$MYSQL_SOCK", [ ])
   AC_MSG_RESULT($MYSQL_SOCK)
 ])
