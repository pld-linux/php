--- php-4.3.3RC3/ext/ncurses/config.m4.orig	2003-06-16 22:17:13.000000000 +0200
+++ php-4.3.3RC3/ext/ncurses/config.m4	2003-08-16 15:18:01.013531176 +0200
@@ -13,13 +13,26 @@
 
    if test -r $PHP_NCURSES/; then # path given as parameter
      NCURSES_DIR=$PHP_NCURSES
+     if test -r $PHP_NCURSES/include/curses.h ; then
+       NCURSES_INC=$PHP_NCURSES/include
+     elif test -r $PHP_NCURSES/include/ncurses/curses.h ; then
+       NCURSES_INC=$PHP_NCURSES/include/ncurses
+     else
+       NCURSES_INC=$PHP_NCURSES/include
+     fi
    else # search default path list
      AC_MSG_CHECKING(for ncurses files in default path)
      for i in $SEARCH_PATH ; do
        if test -r $i/$SEARCH_FOR; then
          NCURSES_DIR=$i
+         NCURSES_INC=$i/include
          AC_MSG_RESULT(found in $i)
        fi
+       if test -r $i/include/ncurses/curses.h; then
+         NCURSES_DIR=$i
+         NCURSES_INC=$i/include/ncurses
+         AC_MSG_RESULT(found in $i, headers in $i/include/ncurses)
+       fi
      done
    fi
   
@@ -29,7 +42,7 @@
    fi
 
    # --with-ncurses -> add include path
-   PHP_ADD_INCLUDE($NCURSES_DIR/include)
+   PHP_ADD_INCLUDE($NCURSES_INC)
 
    # --with-ncurses -> chech for lib and symbol presence
    LIBNAME=ncurses 
--- php-4.3.3RC3/ext/readline/config.m4.orig	2003-02-11 04:24:56.000000000 +0100
+++ php-4.3.3RC3/ext/readline/config.m4	2003-08-16 15:20:16.758894744 +0200
@@ -21,6 +21,10 @@
 
   PHP_ADD_INCLUDE($READLINE_DIR/include)
 
+  AC_CHECK_LIB(tinfo, tgetent,
+  [
+    PHP_ADD_LIBRARY(tinfo,,READLINE_SHARED_LIBADD)
+  ],[
   AC_CHECK_LIB(ncurses, tgetent,
   [
     PHP_ADD_LIBRARY(ncurses,,READLINE_SHARED_LIBADD)
@@ -30,6 +34,7 @@
       PHP_ADD_LIBRARY(termcap,,READLINE_SHARED_LIBADD)
     ])
   ])
+  ])
 
   PHP_CHECK_LIBRARY(readline, readline,
   [
@@ -68,6 +73,10 @@
 
   PHP_ADD_INCLUDE($LIBEDIT_DIR/include)
 
+  AC_CHECK_LIB(tinfo, tgetent,
+  [
+    PHP_ADD_LIBRARY(tinfo,,READLINE_SHARED_LIBADD)
+  ],[
   AC_CHECK_LIB(ncurses, tgetent,
   [
     PHP_ADD_LIBRARY(ncurses,,READLINE_SHARED_LIBADD)
@@ -77,6 +86,7 @@
       PHP_ADD_LIBRARY(termcap,,READLINE_SHARED_LIBADD)
     ])
   ])
+  ])
 
   PHP_CHECK_LIBRARY(edit, readline,
   [
