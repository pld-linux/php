diff -urNp -x '*.orig' php-5.2.17.org/configure.in php-5.2.17/configure.in
--- php-5.2.17.org/configure.in	2021-10-23 18:58:29.039791808 +0200
+++ php-5.2.17/configure.in	2021-10-23 18:58:31.346458475 +0200
@@ -1277,19 +1277,6 @@ PHP_SUBST(PHP_FRAMEWORKS)
 PHP_SUBST(PHP_FRAMEWORKPATH)
 PHP_SUBST(INSTALL_HEADERS)
 
-old_CC=$CC
-
-if test "$PHP_THREAD_SAFETY" = "yes" && test -n "$ac_cv_pthreads_cflags"; then
-  CXXFLAGS="$CXXFLAGS $ac_cv_pthreads_cflags"
-  INLINE_CFLAGS="$INLINE_CFLAGS $ac_cv_pthreads_cflags"
-  cat >meta_ccld<<EOF
-#! /bin/sh
-exec $CC $ac_cv_pthreads_cflags \$@
-EOF
-  CC="$abs_builddir/meta_ccld"
-  chmod +x meta_ccld
-fi
-
 dnl This will go away, if we have a facility to run per-extension code
 dnl after the thread_safety decision was done
 if test "$PHP_THREAD_SAFETY" = "yes" && test "$PHP_MYSQL" = "yes"; then
@@ -1345,8 +1332,6 @@ test -z "$PHP_COMPILE" && PHP_COMPILE='$
 test -z "$CXX_PHP_COMPILE" && CXX_PHP_COMPILE='$(LIBTOOL) --mode=compile $(CXX_COMPILE) -c $<'
 SHARED_LIBTOOL='$(LIBTOOL)'
 
-CC=$old_CC
-
 PHP_CONFIGURE_PART(Generating files)
 
 CXXFLAGS_CLEAN=$CXXFLAGS
