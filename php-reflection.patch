diff -ur php-5.1.2.org/ext/reflection/config.m4 php-5.1.2/ext/reflection/config.m4
--- php-5.1.2.org/ext/reflection/config.m4	2005-12-03 02:12:45.000000000 +0100
+++ php-5.1.2/ext/reflection/config.m4	2006-01-16 19:36:46.460968000 +0100
@@ -5,9 +5,6 @@
 [  --disable-reflection    Disable reflection support], yes, no)
 
 if test "$PHP_REFLECTION" != "no"; then
-  if test "$ext_shared" = "yes"; then
-    AC_MSG_ERROR(Cannot build reflection as a shared module)
-  fi
   AC_DEFINE(HAVE_REFLECTION, 1, [Whether Reflection is enabled])
-  PHP_NEW_EXTENSION(reflection, php_reflection.c)
+  PHP_NEW_EXTENSION(reflection, php_reflection.c, no)
 fi
