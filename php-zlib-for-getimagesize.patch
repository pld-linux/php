make compressed .swf parsing possible,
link core php with -lz for getimagesize()
see also http://bugs.php.net/bug.php?id=29611

diff -urNp -x '*.orig' php-5.6.40.org/ext/standard/image.c php-5.6.40/ext/standard/image.c
--- php-5.6.40.org/ext/standard/image.c	2019-01-09 10:54:13.000000000 +0100
+++ php-5.6.40/ext/standard/image.c	2021-08-23 23:19:16.415803070 +0200
@@ -34,7 +34,7 @@
 #include "win32/php_stdint.h"
 #endif
 
-#if HAVE_ZLIB && !defined(COMPILE_DL_ZLIB)
+#if HAVE_ZLIB
 #include "zlib.h"
 #endif
 
@@ -84,7 +84,7 @@ PHP_MINIT_FUNCTION(imagetypes)
 	REGISTER_LONG_CONSTANT("IMAGETYPE_JP2",     IMAGE_FILETYPE_JP2,     CONST_CS | CONST_PERSISTENT);
 	REGISTER_LONG_CONSTANT("IMAGETYPE_JPX",     IMAGE_FILETYPE_JPX,     CONST_CS | CONST_PERSISTENT);
 	REGISTER_LONG_CONSTANT("IMAGETYPE_JB2",     IMAGE_FILETYPE_JB2,     CONST_CS | CONST_PERSISTENT);
-#if HAVE_ZLIB && !defined(COMPILE_DL_ZLIB)
+#if HAVE_ZLIB
 	REGISTER_LONG_CONSTANT("IMAGETYPE_SWC",     IMAGE_FILETYPE_SWC,     CONST_CS | CONST_PERSISTENT);
 #endif	
 	REGISTER_LONG_CONSTANT("IMAGETYPE_IFF",     IMAGE_FILETYPE_IFF,     CONST_CS | CONST_PERSISTENT);
@@ -192,7 +192,7 @@ static unsigned long int php_swf_get_bit
 }
 /* }}} */
 
-#if HAVE_ZLIB && !defined(COMPILE_DL_ZLIB)
+#if HAVE_ZLIB
 /* {{{ php_handle_swc
  */
 static struct gfxinfo *php_handle_swc(php_stream * stream TSRMLS_DC)
@@ -1321,7 +1321,7 @@ static void php_getimagesize_from_stream
 			result = php_handle_swf(stream TSRMLS_CC);
 			break;
 		case IMAGE_FILETYPE_SWC:
-#if HAVE_ZLIB && !defined(COMPILE_DL_ZLIB)
+#if HAVE_ZLIB
 			result = php_handle_swc(stream TSRMLS_CC);
 #else
 			php_error_docref(NULL TSRMLS_CC, E_NOTICE, "The image is a compressed SWF file, but you do not have a static version of the zlib extension enabled");
